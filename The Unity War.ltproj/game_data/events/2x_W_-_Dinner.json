[
    {
        "name": "W - Dinner",
        "trigger": "on_region_interact",
        "level_nid": "2x",
        "condition": "region.nid == 'Escape'",
        "commands": [],
        "only_once": false,
        "priority": 20,
        "_source": [
            "add_portrait;Caroline;Left",
            "bop_portrait;Caroline",
            "speak;Caroline;\u2028Alright, everyone!{w}\u2028Dinner's ready, so come\u2028and get it while it's hot!",
            "remove_portrait;Caroline",
            "end_skip",
            "transition;close",
            "remove_region;Escape",
            "for;ALL_UNIT;[x.nid for x in game.get_player_units()]",
            "    remove_unit;{ALL_UNIT};immediate",
            "endf",
            "add_group;CampsiteB;CampsiteB;immediate;closest",
            "center_cursor;Emma",
            "transition;open;1500",
            "location_card;After dinner...",
            "flicker_cursor;Emily",
            "transition;close",
            "change_background;ForestDark",
            "transition;open",
            "multi_add_portrait;Emily;Left;Emma;Right",
            "speak;Emily;\u2028How is everyone?{w}\u2028It looks like you were\u2028pretty chatty before dinner.",
            "speak;Emma;\u2028I was just checking up on everyone.{w}\u2028Seems like they were mostly alright.{w}\u2028Everyone's tired, though.",
            "speak;Emma;\u2028Listen, I'll be with Mom, so come over\u2028if you want to watch the stars with us.",
            "bop_portrait;Emma",
            "speak;Emma;\u2028Alright, I'll see you later!",
            "multi_remove_portrait;Emma;Emily",
            "end_skip",
            "transition;close",
            "change_background",
            "transition;open",
            "move_unit;Emily;4,3",
            "add_portrait;Emma;Left",
            "speak;Emma;\u2028It'd be nice to spend some time\u2028with others for the night.{w}\u2028I can spend it with Emily and Mom,\u2028but I've got other allies, too...{w}\u2028I suppose I'll just have to choose.;;;thought_bubble",
            "remove_portrait;Emma",
            "level_var;night;True",
            "for;TALK_TARGET;[x.nid for x in game.get_player_units() if x.nid != 'Emma']",
            "    add_talk;Emma;{TALK_TARGET}",
            "endf"
        ],
        "nid": "2x W - Dinner"
    }
]